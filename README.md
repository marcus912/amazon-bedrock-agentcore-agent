# AWS AI Agent

An AI agent built with AWS Strands SDK and deployed via AWS Bedrock AgentCore agent runtime.

> **Quick Start**: See [QUICK_START.md](QUICK_START.md) for a rapid setup guide using `uv`.

## Overview

This project demonstrates how to build production-ready AI agents using:
- **AWS Strands Agents SDK**: Open-source Python framework for building AI agents
- **AWS Bedrock AgentCore**: Managed infrastructure for deploying agents with enterprise features
- **Amazon Bedrock**: Access to Claude 4 Sonnet and other foundation models

## Features

- 🤖 **Model-driven agent architecture** using Strands SDK
- 🔧 **Built-in tools**: Calculator, Tavily search, and custom tools
- 🏗️ **Production-ready deployment** via Bedrock AgentCore
- 📊 **Custom tool integration** with example implementations
- 🔐 **AWS authentication** and security built-in
- 📝 **Logging and observability** support

## Prerequisites

- Python 3.10 or higher
- [uv](https://docs.astral.sh/uv/) (fast Python package manager)
- AWS Account with Bedrock access
- AWS CLI configured with credentials

## Installation

1. **Install uv** (if not already installed):
   ```bash
   # macOS/Linux
   curl -LsSf https://astral.sh/uv/install.sh | sh

   # Windows
   powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

   # Or via pip
   pip install uv
   ```

2. **Clone the repository**:
   ```bash
   git clone https://github.com/marcus912/aws-ai-agent.git
   cd aws-ai-agent
   ```

3. **Install dependencies with uv**:
   ```bash
   # Remove old virtual environment if exists (recommended for clean start)
   rm -rf .venv

   # uv will automatically create a virtual environment and install dependencies
   uv sync
   ```

   This will install all dependencies including:
   - strands-agents (1.13.0) - Core agent framework
   - strands-agents-tools (0.2.12) - Pre-built tools
   - bedrock-agentcore (1.0.4+) - AWS deployment runtime
   - boto3, pydantic, and 70+ other packages

4. **Configure AWS credentials**:
   ```bash
   aws configure
   ```

5. **Set up environment variables**:
   ```bash
   cp .env.example .env
   # Edit .env with your configuration
   ```

## Project Structure

```
aws-ai-agent/
├── agent/
│   ├── __init__.py
│   └── strands_agent.py         # Main agent implementation
├── tools/
│   ├── __init__.py
│   └── custom_tools.py          # Custom tool definitions (@tool decorator)
├── bedrock_app.py               # Bedrock AgentCore entrypoint
├── main.py                      # Local testing script (interactive CLI)
├── test_bedrock_app.py          # Test bedrock_app locally
├── config.py                    # Centralized configuration (loads .env)
├── agentcore                    # CLI wrapper for bedrock-agentcore-starter-toolkit
├── pyproject.toml               # Project config & dependencies (managed by uv)
├── uv.lock                      # Locked dependencies (auto-generated by uv)
├── .python-version              # Python version (3.13.5)
├── .env.example                 # Environment variables template
├── .gitignore
├── QUICK_START.md               # Quick setup guide
├── DEPLOYMENT.md                # AWS deployment guide
└── README.md
```

## Usage

### Option 1: Local Interactive Testing (Recommended for Development)

Run the agent locally with an interactive CLI:

```bash
uv run python main.py
```

This starts an interactive session where you can test the agent:

```
You: What is the square root of 144?
Agent: The square root of 144 is 12.

You: Analyze this text: "Hello world, this is a test."
Agent: [Returns word count, character count, and other statistics]
```

### Option 2: Test Bedrock App Locally

Test the `bedrock_app.py` entrypoint locally (simulates Bedrock AgentCore requests):

```bash
uv run python test_bedrock_app.py
```

This validates your production code path without deploying to AWS.

### Option 3: Deploy to AWS Bedrock AgentCore (Production)

For production deployment with managed infrastructure, see the **[DEPLOYMENT.md](DEPLOYMENT.md)** guide.

#### Quick Deploy

```bash
# Launch your agent to AWS (interactive)
uv run python agentcore launch

# Check deployment status
uv run python agentcore status

# Test deployed agent
uv run python agentcore invoke --prompt "Hello, agent!"
```

#### Available Commands

The `agentcore` CLI provides these commands:

| Command | Description |
|---------|-------------|
| `launch` | Deploy agent to AWS (Lambda or Fargate) |
| `status` | Check agent status and configuration |
| `invoke` | Send test requests to deployed agent |
| `destroy` | Remove all AWS resources |
| `stop-session` | Stop active runtime session |
| `configure` | Manage configuration |
| `gateway` | Manage MCP gateways |

For detailed deployment instructions, see **[DEPLOYMENT.md](DEPLOYMENT.md)**.

## Custom Tools

The agent includes several custom tools in `tools/custom_tools.py`:

### text_analyzer
Analyzes text and returns statistics:
```python
@tool
def text_analyzer(text: str) -> dict:
    """Analyze text and return basic statistics."""
    # Returns word count, character count, sentence count, etc.
```

### format_data
Formats data into different output formats:
```python
@tool
def format_data(data: str, output_format: str = "json") -> str:
    """Format data into specified output format (json, yaml, xml)."""
```

### aws_region_info
Gets information about AWS regions:
```python
@tool
def aws_region_info(region: str = "us-west-2") -> dict:
    """Get information about an AWS region."""
```

## Adding New Tools

To add custom tools, use the `@tool` decorator:

```python
from strands import tool

@tool
def your_custom_tool(param: str) -> str:
    """
    Description of what your tool does.

    Args:
        param: Parameter description

    Returns:
        Return value description
    """
    # Your implementation here
    return result
```

Then add it to the tools list in `tools/custom_tools.py`:

```python
def get_custom_tools() -> List:
    return [text_analyzer, format_data, aws_region_info, your_custom_tool]
```

## Dependencies

The project uses the following key dependencies (managed in `pyproject.toml`):

| Package | Version | Purpose |
|---------|---------|---------|
| **strands-agents** | 1.13.0 | Core AI agent framework from AWS |
| **strands-agents-tools** | 0.2.12 | Pre-built tools (calculator, tavily_search, etc.) |
| **bedrock-agentcore** | 1.0.4+ | Deploy to AWS managed infrastructure |
| **boto3** | 1.40.0+ | AWS SDK for Python |
| **python-dotenv** | 1.2.0+ | Load environment variables from .env |
| **pydantic** | 2.12.0+ | Data validation and settings management |

All dependencies are locked in `uv.lock` for reproducible builds.

## Configuration

Edit the `.env` file to configure:

- **AGENT_LOG_LEVEL**: Logging level - DEBUG, INFO, WARNING, ERROR, or CRITICAL (default: INFO)

## Architecture

```
┌─────────────────┐
│   User Request  │
└────────┬────────┘
         │
         ▼
┌─────────────────────────┐
│ Bedrock AgentCore App   │
│  (bedrock_app.py)      │
└────────┬────────────────┘
         │
         ▼
┌─────────────────────────┐
│   Strands Agent         │
│  (strands_agent.py)    │
└────────┬────────────────┘
         │
         ▼
┌─────────────────────────┐
│  Tools (Built-in +      │
│  Custom)                │
│  - calculator           │
│  - tavily_search       │
│  - text_analyzer       │
│  - format_data         │
│  - aws_region_info     │
└─────────────────────────┘
```

## Development

### Installing Development Dependencies
```bash
# Install dev dependencies (pytest, black, ruff, mypy)
uv sync --extra dev
```

### Running Tests
```bash
# Add tests in tests/ directory
uv run pytest
```

### Linting and Formatting
```bash
# Format code with black
uv run black agent/ tools/ *.py

# Lint code with ruff
uv run ruff check agent/ tools/ *.py

# Type checking with mypy
uv run mypy agent/ tools/ *.py
```

### Adding New Dependencies
```bash
# Add a runtime dependency
uv add package-name

# Add a development dependency
uv add --dev package-name

# Remove a dependency
uv remove package-name
```

### Updating Dependencies
```bash
# Update all dependencies
uv sync --upgrade

# Update specific package
uv add package-name --upgrade
```

## Troubleshooting

### Build Error: "Unable to determine which files to ship inside the wheel"

If you see this error during `uv sync`, ensure `pyproject.toml` has this configuration:

```toml
[tool.hatch.build.targets.wheel]
packages = ["src"]
```

This tells the build system where your source code is located.

### Module Not Found Errors

Make sure dependencies are installed:
```bash
uv sync
```

### AWS Credentials Error

Configure AWS credentials:
```bash
aws configure
```

Or set environment variables:
```bash
export AWS_ACCESS_KEY_ID=your_key
export AWS_SECRET_ACCESS_KEY=your_secret
export AWS_REGION=us-west-2
```

### Python Version Mismatch

The project requires Python 3.10+. Install the correct version with uv:
```bash
uv python install 3.13.5
```

### Old Virtual Environment Issues

If you have an old `.venv` created with pip/venv, remove it and let uv create a fresh one:
```bash
rm -rf .venv
uv sync
```

## References

### Project Documentation
- [Quick Start Guide](QUICK_START.md) - Fast setup with uv
- [Strands Agents SDK](https://github.com/strands-agents/sdk-python) - Core agent framework
- [Bedrock AgentCore SDK](https://github.com/aws/bedrock-agentcore-sdk-python) - Deployment platform

### AWS Resources
- [AWS Bedrock Documentation](https://docs.aws.amazon.com/bedrock/) - AWS Bedrock service docs
- [Strands 1.0 Announcement](https://aws.amazon.com/blogs/opensource/introducing-strands-agents-1-0-production-ready-multi-agent-orchestration-made-simple/) - Blog post
- [Strands Technical Deep Dive](https://aws.amazon.com/blogs/machine-learning/strands-agents-sdk-a-technical-deep-dive-into-agent-architectures-and-observability/) - Architecture details

### Tools
- [uv Documentation](https://docs.astral.sh/uv/) - Fast Python package manager

## License

Apache License 2.0

## Contributing

Contributions are welcome! Please open an issue or submit a pull request.

## Support

For issues and questions:
- Create an issue in this repository
- Check the [Strands SDK documentation](https://github.com/strands-agents/sdk-python)
- Consult [Bedrock AgentCore documentation](https://github.com/aws/bedrock-agentcore-sdk-python)
